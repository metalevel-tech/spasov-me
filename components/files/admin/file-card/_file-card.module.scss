@import "@/app/globals.variables.module.scss";

// Without this wrapper "display:grid" of .cardPublic
// takes precedence over "display:none" of the dynamically added .hidden
.cardWrapper {
	@apply scroll-m-8 relative;

	:global(.card-item-collapsible) {
		display: none;
	}

	&:global(.expand-collapsed.file-card) :global(.card-item-collapsible) {
		display: inherit;
	}

	&:global(.expand-collapsed.file-card) :global(.card-item-thumb) {
		@apply absolute top-0 left-0 my-2 sm:my-0 opacity-0;
	}

	&::before {
		@apply transition-all duration-300 ease-in-out;

		@screen xa {
			inset: -0.4rem -0.15rem;
		}

		content: "";
		position: absolute;
		display: block;
		border-radius: 0.4rem;
		outline: 4px dashed transparent;
		outline-offset: 0.5rem;
		inset: -0.3rem -0.1rem;
	}

	&:hover {
		&::before {
			@apply transition-all duration-200 ease-in-out;

			outline: 4px dashed theme("colors.primary.DEFAULT/60%");
		}
	}

	&:global(.expand-collapsed-current.file-card) {
		position: relative;

		&::before {
			outline: 4px solid theme("colors.primary.DEFAULT");
		}
	}
}

.card {
	@apply grid relative gap-x-3 sm:gap-x-6 gap-y-2 sm:gap-y-2;

	@screen sm {
		grid-template: "image header" auto "image info" auto "image content" 1fr / auto 1fr;

		:global(.expand-collapsed.file-card) & {
			grid-template: "image header" auto "image info" auto "image content" 1fr / auto 1fr;
		}
	}

	grid-template: "header header" auto "image info" 1fr / auto 1fr;

	:global(.expand-collapsed.file-card) & {
		grid-template: "header" auto "info" auto "image" auto "content" 1fr / auto;
	}

	.header {
		@apply w-full;

		grid-area: header;
	}

	.info {
		@apply flex sm:gap-x-3 flex-col sm:flex-row flex-wrap text-sm;

		grid-area: info;

		:global(.expand-collapsed.file-card) & {
			@apply flex-row gap-x-3;
		}

		.dateModified,
		.contentType,
		.size {
			display: inline-block;

			span {
				display: inline-block;
			}

			span + span {
				@apply ml-1;
			}
		}
	}

	.imageContainer {
		--tw-drop-shadow: drop-shadow(0 5px 15px rgb(0 0 0 / 20%));

		@apply flex items-center justify-start sm:justify-end h-full overflow-hidden drop-shadow-2xl w-full select-none relative max-w-[80px];

		grid-area: image;

		:global(.expand-collapsed.file-card) & {
			@apply max-w-[100%] sm:max-w-[320px] justify-center;

			transition: max-width 300ms ease-out;
		}

		.imageLarge {
			@apply h-auto w-[100%] sm:w-[320px] object-contain rounded-md my-2 sm:my-0 animate-zoomInFile origin-top-left z-[1];
		}

		.imageThumb {
			@apply h-[80px] w-[80px] object-cover rounded-md -z-[1];
		}
	}

	.lightPrimaryText {
		@apply text-foreground-secondary;
	}

	.lightSecondaryText {
		@apply text-foreground-quaternary;
	}

	.title {
		@apply text-lg tracking-wide font-semibold hyphens-auto;

		> p:last-of-type {
			@apply mb-0;
		}
	}

	.contentWrapper {
		grid-area: content;

		.content {
			@apply flex flex-col w-full h-full;

			.description {
				@apply w-full flex-grow;
			}

			.attachedTo {
				@apply w-full mt-3 flex flex-wrap gap-1;
			}
		}
	}

	.buttons {
		@apply float-right sm:ml-2 relative h-7;

		.buttonsContainer {
			@apply absolute flex items-center gap-3 2xs:gap-2 right-0 -top-[0.375rem] select-none scale-75 2xs:scale-90 origin-right;
		}
	}
}
