@import "@/app/globals.variables.module.scss";

// Without this wrapper "display:grid" of .cardPublic
// takes precedence over "display:none" of the dynamically added .hidden
.cardWrapper {
	@apply scroll-m-8 relative;

	:global(.card-item-collapsible) {
		display: none;
	}

	&:global(.expand-collapsed) :global(.card-item-collapsible) {
		display: inherit;
	}

	&:global(.expand-collapsed) :global(.card-item-collapsed) {
		display: none;
	}

	&:before {
		@apply transition-all duration-300 ease-in-out;

		position: absolute;
		top: -0.3rem;
		bottom: -0.3rem;
		left: -0.1rem;
		right: -0.1rem;
		display: block;
		content: "";
		border-radius: 0.4rem;
		outline: 4px dashed transparent;
		outline-offset: 0.5rem;

		// See the _main-layout.module.scss for explanation
		@screen xa {
			top: -0.4rem;
			bottom: -0.4rem;
			left: -0.15rem;
			right: -0.15rem;
		}
	}

	&:hover {
		&:before {
			@apply transition-all duration-200 ease-in-out;
			outline: 4px dashed theme("colors.primary.DEFAULT/60%");
		}
	}

	&:global(.expand-collapsed-current) {
		position: relative;

		&:before {
			outline: 4px solid theme("colors.primary.DEFAULT");
		}
	}
}

.card {
	@apply grid relative xs:gap-x-6 gap-y-4 xs:gap-y-2;

	grid-template-columns: auto;
	grid-template-rows: auto 1fr;
	grid-template-areas:
		"header"
		"image";

	:global(.expand-collapsed) & {
		grid-template-columns: auto;
		grid-template-rows: auto 1fr auto;
		grid-template-areas:
			"header"
			"image"
			"content";
	}

	@screen xs {
		grid-template-columns: auto 1fr;
		grid-template-rows: auto 1fr;
		grid-template-areas:
			"image header"
			"image content";

		:global(.expand-collapsed) & {
			grid-template-columns: auto 1fr;
			grid-template-rows: auto 1fr;
			grid-template-areas:
				"image header"
				"image content";
		}
	}

	.header {
		@apply w-full;

		grid-area: header;
	}

	.imageContainer {
		@apply flex items-center justify-start sm:justify-end h-full overflow-hidden drop-shadow-2xl w-full;

		grid-area: image;

		:global(.expand-collapsed) & {
			@apply justify-center;
		}

		.imageLarge {
			@apply h-auto w-[100%] object-contain rounded-md;
		}

		@screen xs {
			.imageLarge {
				@apply w-[320px];
			}
		}

		.imageThumb {
			@apply h-[80px] w-[80px] object-cover rounded-md;
		}
	}

	// .lightPrimaryText {
	// 	@apply text-foreground-secondary;
	// }

	// .lightSecondaryText {
	// 	@apply text-foreground-quaternary;
	// }

	.title {
		@apply text-lg tracking-wide font-semibold hyphens-auto;

		& > p:last-of-type {
			@apply mb-0;
		}
	}

	.content {
		grid-area: content;

		.description {
			@apply w-full;
		}
	}

	.buttons {
		@apply float-right ml-2 mb-2 relative h-8;

		.buttonsContainer {
			@apply absolute flex items-center gap-3 2xs:gap-2 right-0 -top-[0.375rem] select-none scale-75 2xs:scale-90 origin-right;
		}
	}
}
